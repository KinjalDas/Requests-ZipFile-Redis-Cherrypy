<!DOCTYPE html>
<html>
  <head>
    <!-- <link href="/static/css/style.css" rel="stylesheet"> -->
    <style type="text/css">
      table, th, td {
        border: 1px solid black;
        width:100%;
      }
    </style>
    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {

        $('#search-table').css("display", "none");

        $.ajax({
        type: 'GET',
        url: 'http://127.0.0.1:8080/generator',
        dataType: 'json',
        success: function(data) {
            var rows = [];
            $.each(data,function(index,value) {
                rows.push('<tr><td>'+value['code']+'</td><td>'+value['name']+'</td><td>'+value['open']+'</td><td>'+value['high']+'</td><td>'+value['low']+'</td><td>'+value['close']+'</td></tr>');
            });
            console.log(rows.join(''));
            $('#record-table').append(rows.join(''));
          }
        });

        $("#search-button").click(function(e) {
          $("#search-table > tbody").empty();
          $.ajax({
            type: 'POST',
            url: 'http://127.0.0.1:8080/generator',
            data: {"search_string": $("#search-text").val()},
            dataType: 'json',
            success: function(data) {
            var rows = [];
            $.each(data,function(index,value) {
                rows.push('<tr><td>'+value['code']+'</td><td>'+value['name']+'</td><td>'+value['open']+'</td><td>'+value['high']+'</td><td>'+value['low']+'</td><td>'+value['close']+'</td></tr>');
            });
            console.log(rows.join(''));
            $('#search-table').append(rows.join(''));
            $('#search-table').css("display", "block");
          }
          })
        });
      });
    </script>
  </head>
  <body>
    <table id="record-table">
      <caption>TOP 10 RECORDS</caption>
      <thead>
      <tr>
        <th>CODE</th>
        <th>NAME</th>
        <th>OPEN</th>
        <th>HIGH</th>
        <th>LOW</th>
        <th>CLOSE</th>
      </tr>
      </thead>
    </table>
    <br/>
    <center>
    <input type="text" name="search-text" placeholder="Enter Search Text" id="search-text">
    <input type="button" name="OK" value="search" id="search-button">
    </center>
    <table id="search-table">
      <caption>TOP 10 RECORDS</caption>
      <thead>
      <tr>
        <th>CODE</th>
        <th>NAME</th>
        <th>OPEN</th>
        <th>HIGH</th>
        <th>LOW</th>
        <th>CLOSE</th>
      </tr>
      </thead>
    </table>
  </body>
</html>